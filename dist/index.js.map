{"version":3,"sources":["../src/index.js"],"names":["app","APP_PORT","process","env","APP_HOST","API_ROUTE","set","locals","title","APP_NAME","version","APP_VERSION","use","path","join","__dirname","NODE_ENV","express","json","limit","urlencoded","extended","errorHandler","bodyParser","routes","genericErrorHandler","methodNotAllowed","listen","get","console","log","on","err","error","exit","once","kill","pid"],"mappings":";;AAAA;;AACA;;AAEA;;AACA;;AACA;;AACA;;AACA;;AACA;;AACA;;AAEA;;AACA;;AACA;;;;;;;;AAEA,MAAMA,GAAG,GAAG,uBAAZ;AAEA,MAAMC,QAAQ,GAAGC,OAAO,CAACC,GAAR,CAAYF,QAAZ,IAAwB,MAAzC;AACA,MAAMG,QAAQ,GAAGF,OAAO,CAACC,GAAR,CAAYC,QAAZ,IAAwB,SAAzC;AAEA,MAAMC,SAAS,GAAG,KAAlB;AAEAL,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBL,QAAhB;AACAD,GAAG,CAACM,GAAJ,CAAQ,MAAR,EAAgBF,QAAhB;AAEAJ,GAAG,CAACO,MAAJ,CAAWC,KAAX,GAAmBN,OAAO,CAACC,GAAR,CAAYM,QAA/B;AACAT,GAAG,CAACO,MAAJ,CAAWG,OAAX,GAAqBR,OAAO,CAACC,GAAR,CAAYQ,WAAjC;AAEAX,GAAG,CAACY,GAAJ,CAAQ,2BAAQC,cAAKC,IAAL,CAAUC,SAAV,EAAqB,YAArB,EAAmC,aAAnC,CAAR,CAAR;AACAf,GAAG,CAACY,GAAJ,CAAQ,oBAAR;AACAZ,GAAG,CAACY,GAAJ,CAAQ,sBAAR;AACAZ,GAAG,CAACY,GAAJ,CAAQ,2BAAR;;AAEA,IAAIV,OAAO,CAACC,GAAR,CAAYa,QAAZ,KAAyB,aAA7B,EAA4C;AAC1ChB,EAAAA,GAAG,CAACY,GAAJ,CAAQ,qBAAO,KAAP,CAAR;AACD;;AAEDZ,GAAG,CAACY,GAAJ,CAAQK,iBAAQC,IAAR,CAAa;AAAEC,EAAAA,KAAK,EAAE;AAAT,CAAb,CAAR;AACAnB,GAAG,CAACY,GAAJ,CAAQK,iBAAQG,UAAR,CAAmB;AAAEC,EAAAA,QAAQ,EAAE,IAAZ;AAAkBF,EAAAA,KAAK,EAAE;AAAzB,CAAnB,CAAR;AACAnB,GAAG,CAACY,GAAJ,CAAQU,YAAY,CAACC,UAArB;AACAvB,GAAG,CAACY,GAAJ,CAAQM,aAAR,E,CAEA;;AACAlB,GAAG,CAACY,GAAJ,CAAS,IAAGP,SAAU,EAAtB,EAAyBmB,eAAzB,E,CAEA;;AAEAxB,GAAG,CAACY,GAAJ,CAAQU,YAAY,CAACG,mBAArB;AACAzB,GAAG,CAACY,GAAJ,CAAQU,YAAY,CAACI,gBAArB;AAEA1B,GAAG,CAAC2B,MAAJ,CAAW3B,GAAG,CAAC4B,GAAJ,CAAQ,MAAR,CAAX,EAA4B5B,GAAG,CAAC4B,GAAJ,CAAQ,MAAR,CAA5B,EAA6C,MAAM;AACjDC,EAAAA,OAAO,CAACC,GAAR,CAAa,+BAA8B9B,GAAG,CAAC4B,GAAJ,CAAQ,MAAR,CAAgB,IAAG5B,GAAG,CAAC4B,GAAJ,CAAQ,MAAR,CAAgB,IAAGvB,SAAU,EAA3F;AACD,CAFD;AAIAH,OAAO,CAAC6B,EAAR,CAAW,oBAAX,EAAkCC,GAAD,IAAS;AACxCH,EAAAA,OAAO,CAACI,KAAR,CAAc,sBAAd,EAAsCD,GAAtC;AACA9B,EAAAA,OAAO,CAACgC,IAAR,CAAa,CAAb;AACD,CAHD;AAKAhC,OAAO,CAAC6B,EAAR,CAAW,mBAAX,EAAiCC,GAAD,IAAS;AACvCH,EAAAA,OAAO,CAACI,KAAR,CAAc,mBAAd,EAAmCD,GAAnC;AACA9B,EAAAA,OAAO,CAACgC,IAAR,CAAa,CAAb;AACD,CAHD;AAKAhC,OAAO,CAACiC,IAAR,CAAa,UAAb,EAAyB,MAAM;AAC7BjC,EAAAA,OAAO,CAACkC,IAAR,CAAalC,OAAO,CAACmC,GAArB,EAA0B,SAA1B;AACD,CAFD","sourcesContent":["import \"./env\";\nimport \"./db\";\n\nimport cors from \"cors\";\nimport path from \"path\";\nimport helmet from \"helmet\";\nimport morgan from \"morgan\";\nimport express from \"express\";\nimport favicon from \"serve-favicon\";\nimport compression from \"compression\";\n\nimport json from './utils/json';\nimport routes from './routes';\nimport * as errorHandler from './utils/errorHandler';\n\nconst app = express();\n\nconst APP_PORT = process.env.APP_PORT || \"3000\";\nconst APP_HOST = process.env.APP_HOST || \"0.0.0.0\";\n\nconst API_ROUTE = 'api';\n\napp.set(\"port\", APP_PORT);\napp.set(\"host\", APP_HOST);\n\napp.locals.title = process.env.APP_NAME;\napp.locals.version = process.env.APP_VERSION;\n\napp.use(favicon(path.join(__dirname, \"/../public\", \"favicon.ico\")));\napp.use(cors());\napp.use(helmet());\napp.use(compression());\n\nif (process.env.NODE_ENV === \"development\") {\n  app.use(morgan(\"dev\"));\n}\n\napp.use(express.json({ limit: \"10kb\" }));\napp.use(express.urlencoded({ extended: true, limit: \"10kb\" }));\napp.use(errorHandler.bodyParser);\napp.use(json);\n\n// API Routes\napp.use(`/${API_ROUTE}`, routes);\n\n// Error Middlewares\n\napp.use(errorHandler.genericErrorHandler);\napp.use(errorHandler.methodNotAllowed);\n\napp.listen(app.get('port'), app.get('host'), () => {\n  console.log(`SERVER LISTENING AT: http://${app.get('host')}:${app.get('port')}/${API_ROUTE}`);\n});\n\nprocess.on('unhandledRejection', (err) => {\n  console.error('unhandledRejection: ', err);\n  process.exit(1);\n})\n\nprocess.on('uncaughtException', (err) => {\n  console.error('uncaughtException', err);\n  process.exit(1);\n});\n\nprocess.once('SIGNUSR2', () => {\n  process.kill(process.pid, 'SIGUSR2');\n});\n\n\n"],"file":"index.js"}